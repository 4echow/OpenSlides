{% extends 'application/base_application.html' %}

{% load i18n %}
{% load staticfiles %}

{% block title %}{{ block.super }} - {{ poll }}{% endblock %}

{% if perms.application.can_manage_application %}
{% block submenu %}
    {{ block.super }}
    <br>
    <h3>{%trans "Application No." %} {{ poll.application.number }}</h3>
    <ul>
    <li><a href="{% url print_application_poll poll.id %}"><img src="{% static 'images/icons/application-pdf.png' %}"> {%trans 'Print vote' %}</a></li>
    </ul>
{% endblock %}
{% endif %}

{% block content %}
    <h1>{%trans "Application No." %} {{ application.number }} - {%trans "Vote" %}</h1>
    <h3>{{ application.title }}</h3>

    <p>{%trans "Results of" %} {{ ballot }}. {%trans "Vote" %}</p>
    <i>-1 := {% trans 'majority' %}, -2 := {% trans 'undocumented' %}</i>
    <form action="" method="post" class="small-form">{% csrf_token %}
        <span id="poll_id" style="display:none">{{ poll.id }}</span>
        <table class="table" style="width: auto;">
            <tr>
                <th>{% trans "Option" %}</th>
                <th>{% trans "Votes" %}</th>
            </tr>
            {% for value in forms.0 %}
                <tr>
                    <td>{{ value.label }}</td>
                    <td>{{ value.errors }}{{ value }}</td>
                </tr>
            {% endfor %}
            <tr class="total">
                <td>{% trans "Invalid votes" %}</td>
                <td>{{ pollform.votesinvalid.errors }}{{ pollform.votesinvalid }}</td>
            </tr>
            <tr class="total">
                <td>{% trans "Votes cast" %}</td>
                <td>{{ pollform.votescast.errors }}{{ pollform.votescast }}</td>
            </tr>
        </table>
        {{ post_form }}
        <button class="button" type="submit">
            <span class="icon ok">{%trans 'Save' %}</span>
        </button>
        <button class="button" type="submit" name="apply">
            <span class="icon apply">{%trans 'Apply' %}</span>
        </button>
        <a href='{% url application_view application.id %}'>
        <button class="button" type="button" onclick="window.location='{% url application_view application.id %}'">
            <span class="icon cancel">{%trans 'Cancel' %}</span>
        </button>
        </a>
    </form>
{% endblock %}
