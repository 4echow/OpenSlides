<os-head-bar [nav]="false" [goBack]="true">
    <!-- Title -->
    <div class="title-slot">
        <h2>{{ projector?.name | translate }}</h2>
    </div>
</os-head-bar>

<div class="content-container" *ngIf="projector">
    <div class="column-left">
        <a [routerLink]="['/projector', projector.id]">
            <div id="projector">
                <os-projector [projector]="projector"></os-projector>
            </div>
        </a>
    </div>
    <div class="column-right">
        <div class="control-group">
            <div class="button-size">{{ projector.scroll }}</div>
            <button type="button" mat-icon-button (click)="scroll(scrollScaleDirection.Up)">
                <mat-icon>arrow_upward</mat-icon>
            </button>
            <button type="button" mat-icon-button (click)="scroll(scrollScaleDirection.Down)">
                <mat-icon>arrow_downward</mat-icon>
            </button>
            <button type="button" mat-icon-button (click)="scroll(scrollScaleDirection.Reset)">
                <mat-icon>refresh</mat-icon>
            </button>
        </div>
        <div class="control-group">
            <div class="button-size">{{ projector.scale }}</div>
            <button type="button" mat-icon-button (click)="scale(scrollScaleDirection.Up)">
                <mat-icon>zoom_in</mat-icon>
            </button>
            <button type="button" mat-icon-button (click)="scale(scrollScaleDirection.Down)">
                <mat-icon>zoom_out</mat-icon>
            </button>
            <button type="button" mat-icon-button (click)="scale(scrollScaleDirection.Reset)">
                <mat-icon>refresh</mat-icon>
            </button>
        </div>
        <hr>
        <div class="control-group">
            <button type="button" mat-button (click)="projectPreviousSlide()" [disabled]="projector?.elements_history.length === 0">
                <mat-icon>arrow_back</mat-icon>
                <span translate>Previous</span>
            </button>
            <button type="button" mat-button (click)="projectNextSlide()" [disabled]="projector?.elements_preview.length === 0">
                <span translate>Next</span>
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>

        <div class="queue">
            <h5 translate>History</h5>
            <p *ngFor="let elements of projector?.elements_history">
                {{ getElementDescription(elements[0]) }}
            </p>
        </div>

        <div>
            <h5 translate>Current</h5>

            <div *ngIf="projector.non_stable_elements.length">
                <h4 translate>Slides</h4>
                <mat-list>
                    <mat-list-item *ngFor="let element of projector.non_stable_elements" class="projected">
                        <button type="button" mat-icon-button (click)="unprojectCurrent(element)">
                            <mat-icon>videocam</mat-icon>
                        </button>
                        {{ getElementDescription(element) }}
                    </mat-list-item>
                </mat-list>
            </div>

            <div *ngIf="countdowns.length">
                <h4>
                    <span translate>Countdowns</span>
                    <button type="button" mat-icon-button disableRipple routerLink="/countdowns">
                        <mat-icon>edit</mat-icon>
                    </button>
                </h4>
                <mat-list>
                    <mat-list-item *ngFor="let countdown of countdowns" [ngClass]="{'projected': isProjected(countdown)}">
                        <button type="button" mat-icon-button (click)="project(countdown)">
                            <mat-icon>videocam</mat-icon>
                        </button>
                        {{ countdown.description }}
                    </mat-list-item>
                </mat-list>
            </div>

            <div *ngIf="messages.length">
                <h4>
                    <span translate>Messages</span>
                    <button type="button" mat-icon-button disableRipple routerLink="/messages">
                        <mat-icon>edit</mat-icon>
                    </button>
                </h4>
                <mat-list>
                    <mat-list-item *ngFor="let message of messages; let i = index"  [ngClass]="{'projected': isProjected(message)}">
                        <button type="button" mat-icon-button (click)="project(message)">
                            <mat-icon>videocam</mat-icon>
                        </button>
                        <span translate>Message</span> {{ i + 1 }}
                    </mat-list-item>
                </mat-list>
            </div>

            <div>
                <h4>Current list of speakers overlay</h4>
                <mat-list>
                    <mat-list-item [ngClass]="{'projected': isClosProjected(true)}">
                        <button type="button" mat-icon-button (click)="toggleClos(true)">
                            <mat-icon>videocam</mat-icon>
                        </button>
                        <span translate>Current list of speakers overlay</span>
                    </mat-list-item>
                </mat-list>
            </div>

            <div *ngIf="!isClosProjected(false)">
                <h4>Current list of speakers slide</h4>
                <mat-list>
                    <mat-list-item>
                        <button type="button" mat-icon-button (click)="toggleClos(false)">
                            <mat-icon>videocam</mat-icon>
                        </button>
                        <span translate>Current list of speakers slide</span>
                    </mat-list-item>
                </mat-list>
            </div>
        </div>

        <div class="queue">
            <h5 translate>Queue</h5>
            <div cdkDropList class="drop-list" (cdkDropListDropped)="onSortingChange($event)">
                <div class="list-entry" *ngFor="let element of projector.elements_preview; let i = index" cdkDrag>
                    <div class="drag-handle" cdkDragHandle>
                        <mat-icon>unfold_more</mat-icon>
                    </div>
                    <div class="name">
                        {{ i+1 }}.&nbsp;<span>{{ getElementDescription(element) }}</span>
                    </div>
                    <div class="button-right">
                        <div>
                            <button type="button" mat-button (click)="projectNow(i)">
                                <span translate>Project now</span>
                            </button>
                            <button type="button" mat-icon-button (click)="removePreviewElement(i)">
                                <mat-icon>close</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
